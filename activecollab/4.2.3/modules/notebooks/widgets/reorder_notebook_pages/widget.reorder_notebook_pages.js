(function($){var methods={init:function(s){var settings=jQuery.extend({},s);return this.each(function(){var wrapper=$(this);wrapper.find(">ul ul").sortable({connectWith:"#"+wrapper.attr("id")+" ul",items:"li",forcePlaceholderSize:true,placeholder:"drop_target"});var form=wrapper.parents("form:first");var data=null;form.submit(function(){if(data){data.remove();data=null}data=$('<div class="data"></div>').appendTo(form);wrapper.find("span").each(function(){var item=$(this);var parent=item.parent().parents("li:first").find(">span:first");if(parent.length){data.append('<input type="hidden" name="reorder['+item.attr("object_id")+'][parent_id]" value="'+parent.attr("object_id")+'" />');data.append('<input type="hidden" name="reorder['+item.attr("object_id")+'][parent_type]" value="'+parent.attr("object_type")+'" />')}});return false})})}};$.fn.reorderNotebookPages=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{throw"Method "+method+" does not exist on jQuery.reorderNotebookPages"}}}})(jQuery);