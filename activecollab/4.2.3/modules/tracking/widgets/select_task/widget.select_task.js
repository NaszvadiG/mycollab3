jQuery.fn.selectTask=function(s){var settings=jQuery.extend({name:null,value:0,optional:true,tasks:null},s);return this.each(function(){var wrapper=$(this);var select_project=wrapper.closest("form").find("select.select_project");var selected_project_id=select_project.val();var render_select_task=function(selected_project_id){if(typeof(settings.tasks)=="object"&&settings.tasks){var possibilities=settings.tasks[selected_project_id];if(settings.optional){var options='<option value="">'+App.lang("None")+'</option><option value=""></option>'}else{var options=""}for(var i in possibilities){options+='<option value="'+i+'" class="task_id">#'+i+": "+App.clean(possibilities[i])+"</option>"}var select=$('<select name="'+settings.name+'" class="select_task">'+options+"</select>").appendTo(wrapper.empty())}else{wrapper.empty().append(App.lang("No tasks"))}};render_select_task(selected_project_id);select_project.change(function(){render_select_task(select_project.val())})})};