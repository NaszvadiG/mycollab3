(function($){var public_methods={init:function(options){return this.each(function(){var wrapper=$(this);if(wrapper.data("objectTimeInitialized")){return}var object_time=App.parseNumeric(wrapper.data("objectTime")),object_expenses=App.parseNumeric(wrapper.data("objectExpenses"));if(isNaN(object_time)){object_time=0}if(isNaN(object_expenses)){object_expenses=0}var label_text=generate_label_string(object_time,object_expenses);if(wrapper.data("interface")=="printer"){wrapper.empty().append('<span class="object_tracking_text">'+label_text+"</span> ")}else{var show_label=wrapper.data("showLabel"),estimated_time=wrapper.data("estimatedTime");if(typeof(show_label)=="undefined"||show_label){wrapper.prepend('<span class="object_tracking_text">'+App.clean(label_text)+"</span> ")}estimated_time=App.parseNumeric(estimated_time);if(isNaN(estimated_time)){estimated_time=0}wrapper.find("img").attr("src",get_icon_url(object_time,object_expenses,estimated_time));wrapper.find("a").attr("title",label_text).objectTimeExpensesFlyout(updated_callback_function)}wrapper.data("objectTimeInitialized",true)})}};var updated_callback_function=function(time,expenses,formatted){var wrapper=$(this).parent();wrapper.find("a").attr("title",formatted);if(wrapper.find("span.object_tracking_text").length){wrapper.find("span.object_tracking_text").html(formatted)}if(time||expenses){wrapper.find("img").attr("src",App.Wireframe.Utils.imageUrl("icons/12x12/object-time-active.png","tracking"))}else{wrapper.find("img").attr("src",App.Wireframe.Utils.imageUrl("icons/12x12/object-time-inactive.png","tracking"))}};var generate_label_string=function(object_time,object_expenses){var time_string=false,expenses_string=false;object_time=typeof(object_time)=="undefined"&&object_time===""?0:App.parseNumeric(object_time);object_expenses=typeof(object_expenses)=="undefined"&&object_expenses===""?0:App.parseNumeric(object_expenses);if(object_time>0){time_string=App.lang("Time: :hours",{hours:App.hoursFormat(object_time)})}if(object_expenses>0){expenses_string=App.lang("Expenses: :value",{value:App.moneyFormat(object_expenses)})}if(time_string&&expenses_string){return time_string+". "+expenses_string}else{if(time_string){return time_string}else{if(expenses_string){return expenses_string}}}return App.lang("No Time Logged")};var get_icon_url=function(object_time,object_expenses,estimated_time){if(estimated_time>0&&object_time>estimated_time){return App.Wireframe.Utils.imageUrl("icons/12x12/object-time-alert.png","tracking")}else{return object_time||object_expenses?App.Wireframe.Utils.imageUrl("icons/12x12/object-time-active.png","tracking"):App.Wireframe.Utils.imageUrl("icons/12x12/object-time-inactive.png","tracking")}};var plugin_name="objectTime";$.fn[plugin_name]=function(method){if(public_methods[method]){return public_methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof method==="object"||!method){return public_methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist in jQuery."+plugin_name)}}}})(jQuery);