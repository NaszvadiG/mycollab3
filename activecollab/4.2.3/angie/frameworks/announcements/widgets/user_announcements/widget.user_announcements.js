jQuery.fn.userAnnouncements=function(){return this.each(function(){var wrapper=$(this);if(wrapper.find("li.announcement").length){wrapper.find("li.announcement .announcement_body").expander({slicePoint:200,expandText:App.lang("Read More"),userCollapseText:App.lang("Read Less"),expandEffect:"show",expandSpeed:0,collapseEffect:"hide",collapseSpeed:0})}else{wrapper.parents(".user_announcements_wrapper:first").remove()}wrapper.find("a.announcement_dismiss").asyncLink({type:"post",success_message:App.lang("Announcement dismissed"),indicator_url:App.Wireframe.Utils.indicatorUrl("small"),before:function(){$(this).addClass("processing")},complete:function(){$(this).removeClass("processing")},success:function(announcement){App.Wireframe.Events.trigger("announcement_deleted",[announcement])}});App.Wireframe.Events.bind("announcement_deleted.single",function(event,announcement){var announcement_row=wrapper.find('li[announcement_id="'+announcement.id+'"]');if(announcement_row.length){announcement_row.remove()}if(!wrapper.find("li.announcement").length){wrapper.parents(".user_announcements_wrapper:first").remove()}})})};