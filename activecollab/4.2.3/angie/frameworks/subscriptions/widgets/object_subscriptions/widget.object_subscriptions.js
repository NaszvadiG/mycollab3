App.widgets.ObjectSubscriptions=function(){return{init:function(wrapper_id,settings){var wrapper=$("#"+wrapper_id);var settings=jQuery.extend({subscription_event:null,unsubscription_event:null},settings);var update_list_of_subscribers=function(event,subscribers){if(jQuery.isArray(subscribers)){var size=subscribers.length;switch(size){case 0:wrapper.find("span.list_of_subscribers").text(App.lang("No subscribers"));break;case 1:wrapper.find("span.list_of_subscribers").text(App.lang(":subscriber is subscribed",{subscriber:subscribers["0"]["short_display_name"]}));break;default:var subscribers_string="";var counter=1;for(var i in subscribers){subscribers_string+=subscribers[i]["short_display_name"];if(counter<size){if(counter==size-1){subscribers_string+=App.lang(" and ")}else{subscribers_string+=", "}}counter++}wrapper.find("span.list_of_subscribers").text(App.lang(":subscribers are subscribed",{subscribers:subscribers_string}))}}else{wrapper.find("span.list_of_subscribers").text(App.lang("No subscribers"))}};App.Wireframe.Events.bind(settings.subscription_event,update_list_of_subscribers);App.Wireframe.Events.bind(settings.unsubscription_event,update_list_of_subscribers)}}}();