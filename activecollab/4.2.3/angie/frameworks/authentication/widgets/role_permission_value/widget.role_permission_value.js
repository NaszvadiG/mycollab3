App.widgets.RolePermissionValue=function(){return{init:function(checkbox_id){var checkbox=$("#"+checkbox_id);var cell=checkbox.parent();checkbox.click(function(){var new_value=this.checked;checkbox.hide();cell.append('<img src="'+App.Wireframe.Utils.indicatorUrl()+'" />');$.ajax({url:(new_value?checkbox.attr("set_permission_value_url"):checkbox.attr("unset_permission_value_url")),type:"POST",data:{submitted:"submitted",value:this.checked?1:0},success:function(){cell.find("img").remove();checkbox.show();App.Wireframe.Flash.success("Permission value changed")},error:function(){cell.find("img").remove();checkbox.show()[0].checked=!new_value;App.Wireframe.Flash.error("Failed to set selected permission value")}})})}}}();