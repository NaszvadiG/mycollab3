/* Minified: wireframe.js, jquery.contextpopup.js, jquery.flyout.js, jquery.flyoutForm.js, jquery.outerHTML.js, jquery.selectrange.js, widgets.FormPendingAction.js */
App.Wireframe.Utils.indicatorUrl=function(type,i,dark){var indicator_name;var indicator_type="gif";switch(type){case"big":indicator_name="indicator-loading-big";break;case"small":indicator_name="indicator-loading-small";break;case"ok":indicator_name="indicator-ok";indicator_type="png";break;case"error":indicator_name="indicator-error";indicator_type="png";break;case"pending":indicator_name="indicator-pending";indicator_type="png";break;case"warning":indicator_name="indicator-warning";indicator_type="png";break;default:indicator_name="indicator-loading-normal";break}return App.Wireframe.Utils.imageUrl("layout/bits/"+indicator_name+(dark?"-dark":"")+"."+indicator_type,"environment",i)};App.Wireframe.Utils.ago=function(datetime){return datetime.formatted};App.Wireframe.Utils.shortFilename=function(filename,len){if(typeof(len)!="number"||len<1){len=15}if(filename.length>len){return filename.substr(0,len)}else{return filename}};App.Wireframe.Utils.userLink=function(user,use_short_name){var display_name=use_short_name?user.short_display_name:user.display_name;var link=$('<a class="user_link"></a>').attr("href",user.permalink).text(display_name);if(user.id==0||!user.id){link.addClass("anonymous_user_link")}else{link.addClass("quick_view_item")}return link};App.Wireframe.Utils.companyLink=function(company){return $('<a href="'+company.permalink+'" class="quick_view_item">'+App.clean(company.name)+"</a>")};App.Wireframe.Utils.roleName=function(role){if(typeof(role)=="object"&&role.name&&role.id){return $("<span>"+App.clean(role.name)+"</span>")}else{return $('<span style="color: red; font-weight: bold">'+App.lang("Error: Unknown Role")+"</span>")}};App.Wireframe.Utils.renderVisibilityIndicator=function(visibility){if(visibility==1){return""}if(visibility==0){return'<img src="'+App.Wireframe.Utils.imageUrl("icons/12x12/private-object.png","environment")+'" title="'+App.lang("Private")+'" class="visibility" />'}if(visibility==2){return'<img src="'+App.Wireframe.Utils.imageUrl("icons/16x16/sharing-on.png","system")+'" title="'+App.lang("Public")+'" class="visibility" />'}return""};App.Wireframe.Utils.renderPriorityIndicator=function(value,as_pill){if(typeof(as_pill)=="undefined"){as_pill=true}};var resize_started=null;$(window).resize(function(event){var params=arguments;if(event.target==window){if(!resize_started){App.Wireframe.Events.trigger("window_resize_start",params)}else{clearTimeout(resize_started)}resize_started=setTimeout(function(){App.Wireframe.Events.trigger("window_resize_end",params);resize_started=false},500);App.Wireframe.Events.trigger("window_resize",params)}});
(function($){var public_methods={init:function(options){return this.each(function(){var trigger=$(this);this.contextpopup={};this.contextpopup.settings=jQuery.extend({data:null,dataType:"text",title:null,triggerEvent:"click",autoClose:false,autoCloseDelay:500,height:null,callback:null,success:null},options);if(this.contextpopup.settings.triggerEvent=="hover"){this.contextpopup.settings.triggerEvent="mouseover"}handle_trigger_event.apply(this)})},close:function(){return this.each(function(){close.apply(this)})},reposition:function(){return this.each(function(){refresh_scroll_target.apply(this);reposition.apply(this)})},addButton:function(name,text,url,icon,onclick,show_text){return this.each(function(){add_button.apply(this,[name,text,url,icon,onclick,show_text])})}};var determine_position_and_offset=function(){var trigger=$(this);this.contextpopup.position="top";this.contextpopup.offset_x=0;this.contextpopup.offset_y=0;if(trigger.is("[popups_position]")){this.contextpopup.position=trigger.attr("popups_position")}else{var position_parent=trigger.parents("[popups_position]:first");if(position_parent.length){this.contextpopup.position=position_parent.attr("popups_position")}}var parsed_offset;if(trigger.is("[popups_offset]")){parsed_offset=trigger.attr("popups_offset").split(",");this.contextpopup.offset_x=parseInt(parsed_offset[0]);this.contextpopup.offset_y=parseInt(parsed_offset[1])}else{var offset_parent=trigger.parents("[popups_offset]:first");if(offset_parent.length){parsed_offset=offset_parent.attr("popups_offset").split(",");this.contextpopup.offset_x=parseInt(parsed_offset[0]);this.contextpopup.offset_y=parseInt(parsed_offset[1])}}style=get_tip_style.apply(this)};var handle_trigger_event=function(){var trigger=$(this);var settings=this.contextpopup.settings;trigger.bind(settings.triggerEvent,function(event){if(trigger.hasClass("statusbar_context_popup_open")){close.apply(trigger[0]);return false}if(settings.triggerEvent=="click"){if(!event.metaKey&&!event.ctrlKey&&!event.altKey){show.apply(trigger[0]);return false}}else{show.apply(trigger[0])}return true})};var show=function(){$("#context_popup").remove();this.contextpopup.instance=null;var trigger=$(this);var settings=this.contextpopup.settings;this.contextpopup.instance=$('<div id="context_popup" class="'+(settings.id?settings.id:"")+'">').appendTo($("body"));this.contextpopup.container=$('<div id="context_popup_container"></div>').appendTo(this.contextpopup.instance);this.contextpopup.tip=$('<div id="context_popup_tip"></div>').appendTo(this.contextpopup.instance);this.contextpopup.title=$('<div id="context_popup_title">'+settings.title+"</div>").appendTo(this.contextpopup.container);this.contextpopup.buttons=$('<ul id="context_popup_title_buttons"></ul>').appendTo(this.contextpopup.container);this.contextpopup.close_button=$('<a href="#" id="context_popup_close">x</a>').appendTo(this.contextpopup.container);this.contextpopup.data=$('<div id="context_popup_data"></div>').appendTo(this.contextpopup.container);var trigger_id=trigger.attr("id");if(trigger_id){this.contextpopup.instance.addClass(trigger_id+"_popup")}this.contextpopup.instance.data("trigger",trigger);reset_scroll_target.apply(this);if(settings.width){this.contextpopup.container.width(settings.width+"px")}else{var predefined_width=parseInt(this.contextpopup.container.css("width"));this.contextpopup.container.width(predefined_width+"px")}if(settings.height){this.contextpopup.container.height(settings.height+"px")}determine_position_and_offset.apply(this);draw_popup_tip.apply(this);initialize_dialog_closing.apply(this);load_data.apply(this);reposition.apply(this);$(document).resize(function(){reposition.apply(trigger[0])});this.contextpopup.container.resize(function(){reposition.apply(trigger[0])});trigger.addClass("statusbar_context_popup_open");if(settings.success&&typeof(settings.success)=="function"){settings.success()}};var get_tip_style=function(){var style={};style.background_color=(this.contextpopup.position=="bottom")?this.contextpopup.title.css("backgroundColor"):this.contextpopup.container.css("backgroundColor");switch(this.contextpopup.position){case"bottom":style.border_width=parseInt(this.contextpopup.container.css("borderBottomWidth"));style.border_color=this.contextpopup.container.css("borderBottomColor");break;case"top":style.border_width=parseInt(this.contextpopup.container.css("borderTopWidth"));style.border_color=this.contextpopup.container.css("borderTopColor");break;case"left":style.border_width=parseInt(this.contextpopup.container.css("borderLeftWidth"));style.border_color=this.contextpopup.container.css("borderLeftColor");break;case"right":style.border_width=parseInt(this.contextpopup.container.css("borderRightWidth"));style.border_color=this.contextpopup.container.css("borderRightColor");break}style.shadow_color="none";style.shadow_blur=0;var shadow=this.contextpopup.container.css("box-shadow");if(shadow){var shadow_properties=shadow.replace(", ",",").replace(", ",",").split(" ")}else{var shadow_properties="none"}if(shadow_properties!="none"){style.shadow_color=shadow_properties[0];style.shadow_blur=parseInt(shadow_properties[3])}return style};var draw_popup_tip=function(){var max_x=this.contextpopup.tip.width();var max_y=this.contextpopup.tip.height();var canvas=$('<canvas id="context_popup_tip_canvas" width="'+max_x+'px" height="'+max_y+'px"></canvas>');this.contextpopup.tip.empty().append(canvas);if(!canvas[0].getContext){}if(canvas[0].getContext){var context=canvas[0].getContext("2d")}else{var context=null;return false}var style=get_tip_style.apply(this);context.fillStyle=style.background_color;context.shadowBlur=style.shadow_blur;context.shadowColor=style.shadow_color;context.shadowOffsetX="0";context.shadowOffsetY="0";context.beginPath();switch(this.contextpopup.position){case"top":context.moveTo(0,0);context.lineTo(max_x,0);context.lineTo(max_x/2,max_y-style.shadow_blur);break;case"bottom":context.moveTo(0,max_y);context.lineTo(max_x,max_y);context.lineTo(max_x/2,0+style.shadow_blur);break;case"left":context.moveTo(0,0);context.lineTo(max_x-style.shadow_blur,max_y/2);context.lineTo(0,max_y);break;case"right":context.moveTo(max_x,0);context.lineTo(0+style.shadow_blur,max_y/2);context.lineTo(max_x,max_y);break}context.fill();context.closePath();if(style.border_width){context.shadowBlur=0;context.shadowColor="none";context.strokeStyle=style.border_color;context.lineWidth=style.border_width;context.beginPath();switch(this.contextpopup.position){case"top":context.moveTo(0,-style.border_width/2);context.lineTo(max_x/2,max_y-(style.border_width/2)-style.shadow_blur);context.lineTo(max_x,-style.border_width/2);break;case"bottom":context.moveTo(0,max_y);context.lineTo(max_x/2,+style.border_width/2+style.shadow_blur);context.lineTo(max_x,max_y);break;case"left":context.moveTo(-style.border_width/2,0);context.lineTo(max_x-(style.border_width/2)-style.shadow_blur,max_y/2);context.lineTo(-style.border_width/2,max_y);break;case"right":context.moveTo(max_x-(style.border_width/2),0);context.lineTo(style.border_width/2+style.shadow_blur,max_y/2);context.lineTo(max_x-(style.border_width/2),max_y);break}context.stroke();context.closePath()}};var initialize_dialog_closing=function(){var trigger=$(this);var settings=this.contextpopup.settings;if(!settings.autoClose){this.contextpopup.close_button.click(function(){close.apply(trigger[0]);return false});this.contextpopup.buttons.css("right","36px")}else{this.contextpopup.close_button.remove();this.contextpopup.instance.delayedHover(function(){},function(){close.apply(trigger[0])},settings.autoCloseDelay)}var document_object=$(document);document_object.bind("keydown",function(event){if(event.keyCode==27){document_object.unbind(event);close.apply(trigger[0])}});document_object.bind("click",function(event){var target=$(event.target);if(!target.parents("#context_popup").length){document_object.unbind(event);close.apply(trigger[0])}})};var load_data=function(){var trigger=$(this);var settings=this.contextpopup.settings;var skip_post_init=false;if(!settings.data){return false}this.contextpopup.data.empty();if(typeof(settings.data)=="object"){this.contextpopup.data.append(settings.data)}else{if(typeof(settings.data)=="function"){this.contextpopup.data.append(settings.data())}else{if(App.isValidUrl(settings.data)||settings.dataType=="url"){skip_post_init=true;this.contextpopup.data.addClass("loading");reposition.apply(trigger[0]);$.ajax({url:settings.data,success:function(response){trigger[0].contextpopup.data.removeClass("loading").html(response);data_loaded.apply(trigger[0])},error:function(response,response_text){App.Wireframe.Flash.error(App.lang("Failed to load popup"));close.apply(trigger[0])}})}else{this.contextpopup.data.append(settings.data)}}}if(!skip_post_init){data_loaded.apply(this)}};var data_loaded=function(){refresh_scroll_target.apply(this);var callback=this.contextpopup.settings.callback;if(callback&&typeof(callback)=="function"){callback.apply(this)}reposition.apply(this)};var refresh_scroll_target=function(){var scroll_target=this.contextpopup.data.find(".context_popup_scrollable:first");if(scroll_target.length){set_scroll_target.apply(this,[scroll_target])}else{reset_scroll_target.apply(this)}};var reset_scroll_target=function(){set_scroll_target.apply(this,[this.contextpopup.data])};var set_scroll_target=function(scroll_target){if(this.contextpopup.scroll_target&&this.contextpopup.scroll_target.length){this.contextpopup.scroll_target.removeClass("context_popup_scrollable");this.contextpopup.scroll_target.css("height","auto")}this.contextpopup.scroll_target=scroll_target;this.contextpopup.scroll_target.addClass("context_popup_scrollable");reposition.apply(this)};var reposition=function(){if(!this.contextpopup.instance){return false}var trigger=$(this);var trigger_parent=$("body:first");var style=get_tip_style.apply(this);var reposition_data={appearance_offset:40,style_offset:parseInt(style.shadow_blur),trigger:{width:trigger.outerWidth(),height:trigger.outerHeight(),offset_top:trigger.offset().top,offset_left:trigger.offset().left,offset_bottom:trigger_parent.height()-trigger.outerHeight()-trigger.offset().top,offset_right:trigger_parent.width()-trigger.outerWidth()-trigger.offset().left},tip:{width:this.contextpopup.tip.width(),height:this.contextpopup.tip.height(),max:Math.max(this.contextpopup.tip.width(),this.contextpopup.tip.height())}};this.contextpopup.instance.css("padding","0px").css("margin","0px");switch(this.contextpopup.position){case"top":position_top.apply(this,[reposition_data]);break;case"bottom":position_bottom.apply(this,[reposition_data]);break;case"left":position_left.apply(this,[reposition_data]);break;case"right":position_right.apply(this,[reposition_data]);break}};var position_top=function(reposition_data){this.contextpopup.instance.css("paddingBottom",reposition_data.tip.height+"px");if(this.contextpopup.scroll_target.length){this.contextpopup.scroll_target.css("height","auto");var container_height=this.contextpopup.container.outerHeight();var scroll_height=this.contextpopup.scroll_target.outerHeight();var height_delta=container_height-scroll_height;var max_dialog_height=reposition_data.trigger.offset_top-reposition_data.tip.height;var current_max_scroll_height=max_dialog_height-height_delta;if(scroll_height>current_max_scroll_height){this.contextpopup.scroll_target.css("height",current_max_scroll_height)}else{this.contextpopup.scroll_target.css("height","auto")}}this.contextpopup.tip.css({bottom:this.contextpopup.container.css("borderBottomWidth"),top:"auto"});if((reposition_data.trigger.offset_right-this.contextpopup.instance.outerWidth()+reposition_data.trigger.width)>=0){this.contextpopup.tip.css({right:"auto",left:((reposition_data.trigger.width-reposition_data.tip.max)/2)+"px"});this.contextpopup.instance.offset({left:reposition_data.trigger.offset_left,top:reposition_data.trigger.offset_top-this.contextpopup.instance.outerHeight()})}else{this.contextpopup.tip.css({left:"auto",right:((reposition_data.trigger.width-reposition_data.tip.max)/2)+"px"});this.contextpopup.instance.offset({left:reposition_data.trigger.offset_left+reposition_data.trigger.width-this.contextpopup.instance.outerWidth(),top:reposition_data.trigger.offset_top-this.contextpopup.instance.outerHeight()})}var current_offset=this.contextpopup.instance.offset();this.contextpopup.instance.offset({left:current_offset.left+this.contextpopup.offset_x,top:current_offset.top+this.contextpopup.offset_y+reposition_data.style_offset})};var position_bottom=function(reposition_data){this.contextpopup.instance.css("paddingTop",reposition_data.tip.height+"px");if(this.contextpopup.scroll_target.length){this.contextpopup.instance.css("height","auto");this.contextpopup.scroll_target.css("max-height",Math.abs($(window).height()-reposition_data.trigger.offset_top-reposition_data.trigger.height-reposition_data.tip.height-(this.contextpopup.instance.height()-this.contextpopup.scroll_target.height())))}this.contextpopup.tip.css({top:this.contextpopup.container.css("borderTopWidth"),bottom:"auto"});if((reposition_data.trigger.offset_right-this.contextpopup.instance.outerWidth()+reposition_data.trigger.width)>=0){this.contextpopup.tip.css({right:"auto",left:((reposition_data.trigger.width-reposition_data.tip.max)/2)+"px"});this.contextpopup.instance.offset({left:reposition_data.trigger.offset_left,top:reposition_data.trigger.offset_top+reposition_data.trigger.height})}else{this.contextpopup.tip.css({left:"auto",right:((reposition_data.trigger.width-reposition_data.tip.max)/2)+"px"});this.contextpopup.instance.offset({left:reposition_data.trigger.offset_left+reposition_data.trigger.width-this.contextpopup.instance.outerWidth(),top:reposition_data.trigger.offset_top+reposition_data.trigger.height})}var current_offset=this.contextpopup.instance.offset();this.contextpopup.instance.offset({left:current_offset.left+this.contextpopup.offset_x,top:current_offset.top+this.contextpopup.offset_y-reposition_data.style_offset})};var position_left=function(reposition_data){if(this.contextpopup.scroll_target.length){this.contextpopup.instance.css("height","auto");this.contextpopup.scroll_target.css("max-height",Math.abs($(window).height()-(this.contextpopup.instance.height()-this.contextpopup.scroll_target.height())))}var negative_offset=reposition_data.trigger.offset_bottom-this.contextpopup.instance.height()+reposition_data.appearance_offset+reposition_data.trigger.height;if(negative_offset>0){negative_offset=reposition_data.appearance_offset}else{negative_offset=Math.abs(negative_offset)+reposition_data.appearance_offset}this.contextpopup.instance.css("paddingRight",(reposition_data.tip.width-parseInt(this.contextpopup.instance.css("borderLeftWidth")))+"px");this.contextpopup.tip.css({right:"auto",left:"0px",top:negative_offset+"px",bottom:"auto"});this.contextpopup.instance.offset({left:reposition_data.trigger.offset_left-this.contextpopup.instance.outerWidth(),top:reposition_data.trigger.offset_top-negative_offset});var current_offset=this.contextpopup.instance.offset();this.contextpopup.instance.offset({left:current_offset.left+this.contextpopup.offset_x+reposition_data.style_offset,top:current_offset.top+this.contextpopup.offset_y})};var position_right=function(reposition_data){if(this.contextpopup.scroll_target.length){this.contextpopup.instance.css("height","auto");this.contextpopup.scroll_target.css("max-height",Math.abs($(window).height()-(this.contextpopup.instance.height()-this.contextpopup.scroll_target.height())))}var negative_offset=reposition_data.trigger.offset_bottom-this.contextpopup.instance.height()+reposition_data.appearance_offset+reposition_data.trigger.height;if(negative_offset>0){negative_offset=reposition_data.appearance_offset}else{negative_offset=Math.abs(negative_offset)+reposition_data.appearance_offset}this.contextpopup.instance.css("paddingLeft",(reposition_data.tip.width-parseInt(this.contextpopup.instance.css("borderRightWidth")))+"px");this.contextpopup.tip.css({right:"auto",left:"0px",top:negative_offset+"px",bottom:"auto"});this.contextpopup.instance.offset({left:reposition_data.trigger.offset_left+reposition_data.trigger.width,top:reposition_data.trigger.offset_top-negative_offset});var current_offset=this.contextpopup.instance.offset();this.contextpopup.instance.offset({left:current_offset.left+this.contextpopup.offset_x-reposition_data.style_offset,top:current_offset.top+this.contextpopup.offset_y})};var close=function(){App.Wireframe.Events.unbind(".context_popup");$(this).removeClass("statusbar_context_popup_open");if(this.contextpopup&&this.contextpopup.instance){this.contextpopup.instance.remove();this.contextpopup.instance=null}return true};var add_button=function(name,text,url,icon,onclick,show_text){var trigger=$(this);var button_wrapper=$('<li class="context_popup_button button_'+name+'"></li>').appendTo(this.contextpopup.buttons);var button=$('<a href="'+url+'" title="'+text+'"></a>').appendTo(button_wrapper);if(icon){button.append('<img src="'+icon+'" alt="'+text+'" />')}if(show_text){button.append("<span>"+text+"</span>")}if(typeof(onclick)=="function"){button.click(function(){var action_result=onclick();if(action_result){close.apply(trigger[0])}return action_result})}else{button.click(function(){close.apply(trigger[0])})}};var plugin_name="contextPopup";$.fn[plugin_name]=function(method){if(public_methods[method]){return public_methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof method==="object"||!method){return public_methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist in jQuery."+plugin_name)}}}})(jQuery);
jQuery.fn.flyout=function(s){var settings=jQuery.extend({width:null,href:null,title:null,success:null,error:null,success_event:null,error_event:"async_operation_error",stop_propagation:false,close:null},s);if(settings.width){if(parseInt(settings.width)==settings.width){settings.width=settings.width}else{settings.width_class=settings.width;settings.width=1000}}else{settings.width=1000}return this.each(function(){var element=$(this);element.click(function(event){if(typeof(settings.href)=="function"){var url=settings.href()}else{if(settings.href){var url=settings.href}else{var url=element.attr("href")}}var dialog=App.widgets.FlyoutDialog.show({title:settings.title?settings.title:element.attr("title"),data:url,data_type:"url",min_height:"auto",width:settings.width,width_class:settings.width_class,close:settings.close,defaultErrorHandler:settings.error_event,success:function(response){if(typeof(settings.success)=="function"){settings.success.apply(this,[response])}if(settings.success_event){App.Wireframe.Events.trigger(settings.success_event,[response])}},error:function(response){if(typeof(settings.error)=="function"){settings.error.apply(this,[response])}},buttons:[]});if(settings.stop_propagation){return false}else{event.preventDefault()}})})};
App.Delegates.flyoutFormClick=function(event,s){var element=$(this);var settings=jQuery.extend({success:null,error:null,href:null,title:null,focus_first_field:true,success_event:null,success_message:null,discover_permalink_on_success:true,stop_propagation:false,error_event:"async_operation_error",on_close_event:null},s);if(settings.width){if(parseInt(settings.width)==settings.width){settings.width=settings.width}else{settings.width_class=settings.width;settings.width=1000}}else{settings.width=1000}var dialog=App.widgets.FlyoutDialog.show({title:settings.title?settings.title:element.attr("title"),data:settings.href?settings.href:element.attr("href"),data_type:"url",min_height:"auto",width:settings.width,width_class:settings.width_class,on_close:function(){if(settings.on_close_event){App.Wireframe.Events.trigger(settings.on_close_event)}},success:function(){if(dialog.is("form")){var form=dialog}else{var form=dialog.find("form:first")}if(settings.focus_first_field){form.find("input:visible:not(.input_date)").each(function(){var input_type=$(this).attr("type");if(input_type=="text"||input_type=="email"||input_type=="url"||input_type=="number"){$(this).focus();return false}})}var handle_success=function(response){if(typeof(response)=="object"&&response&&response.ajax_error){handle_error.apply(this,[response]);return false}if(typeof(settings.success)=="function"){settings.success.apply(element[0],[response])}if(settings.success_message){var success_flash_additional={};if(settings.discover_permalink_on_success&&typeof(response)=="object"&&response){if(response.permalink){success_flash_additional.url=response.permalink}else{if(response.urls&&response.urls["view"]){success_flash_additional.url=response.urls["view"]}}}App.Wireframe.Flash.success(settings.success_message,null,true,success_flash_additional)}if(settings.success_event){App.Wireframe.Events.trigger(settings.success_event,[response])}settings.on_close_event=null;App.widgets.FlyoutDialog.stopProcessing(dialog);App.widgets.FlyoutDialog.close(dialog)};var handle_error=function(response){App.widgets.FlyoutDialog.stopProcessing(dialog);if(typeof(settings.error)=="function"){settings.error.apply(element[0],[response])}};form.submit(function(){if(form.is(".disabled")){form.removeClass("disabled");return false}if(!App.widgets.FormPendingAction.init(form)){return false}App.widgets.FlyoutDialog.startProcessing(dialog);var upload_pending=false;form.find('input[type="file"]').each(function(){if($(this).val()){upload_pending=true}});var options={url:form.attr("action"),type:"post",dataType:"json",defaultErrorHandler:settings.error_event,success:function(response){handle_success.apply(this,[response])},error:function(response){handle_error.apply(this,[response])}};if(!upload_pending){options.data=form.serialize();$.ajax(options)}else{options.url=App.extendUrl(options.url,{async:1});form.ajaxSubmit(options)}return false})}});if(settings.stop_propagation){return false}else{event.preventDefault()}};jQuery.fn.flyoutForm=function(s){return this.click(function(event){App.Delegates.flyoutFormClick.apply(this,[event,s])})};
(function($){$.fn.outerHTML=function(){return $(this).clone().wrap("<div></div>").parent().html()}})(jQuery);
(function($){$.fn.selectRange=function(start,end){if(!end){end=start}return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(start,end)}else{if(this.createTextRange){var range=this.createTextRange();range.collapse(true);range.moveEnd("character",end);range.moveStart("character",start);range.select()}}})}})(jQuery);
App.widgets.FormPendingAction=function(){return{init:function(form){if(!form.is(".uploading")){return true}var button_holder=form.find(".button_holder");var button_holder_elements=button_holder.find("*:visible").hide();var cancel_submission=$('<button type="button" class="login">'+App.lang("Cancel form submission")+"</button>").appendTo(button_holder);var pending_message=App.lang("Waiting for actions to complete");if(form.is(".uploading")){pending_message=App.lang("Waiting for uploads to complete")}var pending_message_span=$('<span class="form_pending_action_label">'+pending_message+"</span>").insertAfter(cancel_submission).css("background-image","url("+App.Wireframe.Utils.indicatorUrl("small")+")");var cancel_pending=function(){cancel_submission.remove();pending_message_span.remove();button_holder_elements.show()};var interval=setInterval(function(){if(!form.is(".uploading")){clearInterval(interval);cancel_pending();form.submit()}},1000);cancel_submission.click(function(){clearInterval(interval);cancel_pending()});return false}}}();
