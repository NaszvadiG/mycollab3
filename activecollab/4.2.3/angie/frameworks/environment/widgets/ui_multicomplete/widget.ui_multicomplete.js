jQuery.fn.multicomplete=function(s){function split(val){return val.split(/,\s*/)}function extract_last(term){return split(term).pop()}var available_values=typeof(s)=="object"&&s&&jQuery.isArray(s.source)?s.source:[];var settings=jQuery.extend({minLength:0,focus:function(){return false},select:function(event,ui){var terms=split(this.value);terms.pop();terms.push(ui.item.value);terms.push("");this.value=terms.join(", ");return false}},s);settings.source=function(request,response){response($.ui.autocomplete.filter(available_values,extract_last(request.term)))};return this.bind("keydown",function(event){if(event.keyCode===$.ui.keyCode.TAB&&$(this).data("ui-autocomplete").menu.active){event.preventDefault()}}).autocomplete(settings)};